document.getElementById('btn').onclick = async () => {
    const status = document.getElementById('status');
    const resultDiv = document.getElementById('result');
    const imgUrl = document.getElementById('imgUrl').value;

    status.innerText = "üöÄ –í—ñ–¥–ø—Ä–∞–≤–∫–∞...";

    try {
        const response = await fetch('/start', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                image_url: imgUrl, 
                prompt: document.getElementById('prompt').value 
            })
        });

        // –¶–µ–π –±–ª–æ–∫ –ø–æ–∫–∞–∂–µ –Ω–∞–º –ø—Ä–∞–≤–¥—É
        if (!response.ok) {
            const errorText = await response.text();
            console.error("–°–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–≤ –ø–æ–º–∏–ª–∫–æ—é:", errorText);
            status.innerText = "–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –î–∏–≤–∏—Å—å –∫–æ–Ω—Å–æ–ª—å (F12).";
            return;
        }

        const data = await response.json();
        const request_id = data.request_id;
        
        // –î–∞–ª—ñ —Ç–≤—ñ–π —Ü–∏–∫–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏...
        // ...
    } catch (e) {
        console.error("–ü–æ–º–∏–ª–∫–∞ fetch:", e);
        status.innerText = "–ü–æ–º–∏–ª–∫–∞ –∑–≤'—è–∑–∫—É.";
    }
};